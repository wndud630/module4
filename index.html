<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>360도 이미지 회전</title>
  <style>
    #product360 {
      display: flex; /* 내부 아이템들을 flexbox로 배치 */
      justify-content: center; /* 콘텐츠를 가운데 정렬 */
      gap: 0; /* 캔버스 사이의 간격 제거 */
      margin: 0 auto; /* 전체 컨테이너 가운데 정렬 */
      flex-wrap: wrap; /* 화면 크기에 따라 자동 줄바꿈 */
    }
        .canvas-container {
      width: 100%; /* 기본적으로 화면 전체 너비를 사용 */
      max-width: 500px; /* 최대 크기를 설정 */
      aspect-ratio: 1 / 1; /* 정사각형 비율을 유지 */
      overflow: hidden; /* 넘치는 부분은 잘림 */
    }
    
    canvas {
      width: 100%;
      height: 100%px;
          display: block;
    }
  </style>
</head>
<body>
  <!-- 360도 이미지를 표시할 div -->
  <div id="product360">
    <canvas id="canvas"></canvas>
  </div>

  <!-- 360도 이미지 회전 효과를 구현하는 자바스크립트 코드 -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const canvas = document.getElementById('canvas');
      const ctx = canvas.getContext('2d');
      
      // 이미지 파일들
      const images4 = [
    'https://cdn.imweb.me/thumbnail/20241111/246af90a751bb.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/2b0695971a063.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/c26a421ecee4e.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/f55438d01fba7.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/fb79ad39469db.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/633a52b792845.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/a22eb1e91bef1.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/b149009b8d724.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/d5131c71a6b4b.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/23cce4b962451.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/459e7ac21f079.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/cb25ced529ce9.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/0c9b2acbd1c15.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/a41bd3ec65e45.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/1041cd4fda879.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/457fa55917633.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/2e2ebc68cff74.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/8db80c0bde981.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/204cc778c0840.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/212040aa90fc1.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/927dc9b6668f0.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/3694538d5870a.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/58fd5a6be6398.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/c98c132bd4ab7.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/27486de5eaeb7.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/47f3bffce1676.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/453e5a807a954.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/4584ce8639e7a.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/2125f9804a0b6.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/154c74c583969.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/102ea5b0c981f.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/4b55e426851bf.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/1aada1a5dc1ec.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/1403be32a18e8.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/02d9d6f638783.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/01ad8affd19f2.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/f4fd66e0232c9.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/92888b547f05e.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/a852a0f5029ee.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/21e7db8d103cc.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/202ca02c671d4.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/7f367b4a48168.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/eece1df6a7f6b.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/2261b1f1c4a57.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/81c4539f6d592.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/2514b0937b67e.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/b04313152d4ca.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/479546f79eba6.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/263b96fd18ea6.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/0ac23c8b69cb6.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/b85bea181af26.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/934a083f0bd27.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/8e93abf4d361d.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/e3edeaeb4bd80.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/f3cd05912a785.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/8145237c0ee31.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/6900d261926ef.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/ae0dac89f38e4.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/a85c768461111.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/57b356f4970e3.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/5a76d50395eab.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/c6c4553b2697d.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/77be9960f857a.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/91e7e3790c87c.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/a2cab2af1442c.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/bb383a2fb2a97.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/96c112e27fb8e.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/f656c5ff4954c.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/c6254086eb287.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/ae14af03837e0.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/c0833e2f0fd04.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/a3e4234ed701e.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/62c234499d109.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/ec16f14233776.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/4f89ac76e4d26.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/fdfd23974d726.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/8219841d606e4.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/5bd94f43cc55d.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/1956bf94206f7.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/3e03f69edf026.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/83c4d12f7d2af.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/b6e0ddac76992.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/d25db11e04fd9.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/b7491a6cb283f.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/9520cff4af5fd.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/3e80c2233ea19.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/4c3ede3789d43.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/55a22bd8efaba.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/7710fd361ef84.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/bdfff2485b6ef.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/c1e56f1c78efe.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/5a01aaeb1d241.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/b9857021976db.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/2d09d486591f7.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/5c7d8154873cf.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/7c28ba5b8ebc8.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/84560ad06e9bd.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/9868fef00a031.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/7c3c5762094a4.jpg',
    'https://cdn.imweb.me/thumbnail/20241111/963c356ee04df.jpg'
      ];

      let currentIndex  = Math.floor(images.length / 2); // 중간 이미지부터 시작
      let isDragging = false;
      let startX;
      const rotationFactor = 1; // 회전 속도 조절 인자

      // 캔버스 크기 설정 (실제 이미지 사이즈에 맞추기!!!)
      canvas.width = 1000;  // 너비 설정
      canvas.height = 1000; // 높이 설정

      // 이미지 로드
      const imgElements = [];
      let imagesLoaded = 0;
      images.forEach((src, index) => {
        const img = new Image();
        img.src = src;
        img.onload = () => {
          imgElements[index] = img;
          imagesLoaded++;
          if (imagesLoaded === images.length) {
            drawImage();
          }
        };
      });

      // 이미지 그리기
function drawImage() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(imgElements[currentIndex], 0, 0, canvas.width, canvas.height);
      }
 
// 마우스가 캔버스로 들어올 때 커서 이미지 변경
      canvas.addEventListener('mouseenter', () => {
        canvas.style.cursor = url(https://cdn.imweb.me/thumbnail/20241111/cd03d21ffa98d.png), auto;
      });

      // 드래그 이벤트 처리		   
  canvas.addEventListener('mousedown', (e) => {
    isDragging = true;
    startX = e.clientX;
  });

  document.addEventListener('mouseup', (e) => {
    isDragging = false;
  });

  document.addEventListener('mousemove', (e) => {
    if (isDragging) {
      const dx = e.clientX - startX;
      const numImages = imgElements.length;
      const step = Math.round((dx / canvas.width) * numImages * rotationFactor);
      currentIndex = (currentIndex + step + numImages) % numImages;
      drawImage();
      startX = e.clientX;
    }
  });

      // 터치 이벤트
      canvas.addEventListener('touchstart', (e) => {
        isDragging = true;
        startX = e.touches[0].clientX;
      });

      canvas.addEventListener('touchend', (e) => {
        isDragging = false;
        lastDx = e.changedTouches[0].clientX - startX;
      });

      canvas.addEventListener('touchmove', (e) => {
        if (isDragging) {
          const dx = e.touches[0].clientX - startX;
          const numImages = imgElements.length;
          const step = Math.round((dx / canvas.width) * numImages * rotationFactor);
          currentIndex = (currentIndex + step + numImages) % numImages;
          drawImage();
          startX = e.touches[0].clientX;
        }
      });
    });
  </script>
</body>
</html>
